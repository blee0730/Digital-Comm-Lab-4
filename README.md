# Digital-Comm-Lab-4
## Introduction
In this lab the emona-tims hardware and free online software that simulates the hardware. The first part of the lab (the ASK) is done using the actual hardware following along with the tutorial lab for ASKs. The second part of the lab (the FSK) is done on the free online software also following along with the tutorial lab for FSKs. External hardware also had to be used for the oscilliscope in order to see the waveforms generated by the emona hardware but was not needed for the online version as it provides everything.
## Amplitude Shift Keying (ASK)
### Part A - Generating an ASK signal
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/3a28d112-639d-435d-8bf7-94a3177bdd7d)

This is the block diagram used for the first part of this lab. The multiplier block was supposed to be the Dual Analog Switch, however that particular block was not working so the multiplier block was used as a substitute. The carrier is a 2kHz sine wave while the signal used is a 2kHz square wave to emulate a digital signal. The two were connected to the multiplier block without external sync as the oscilliscope hareware used does not have an external sync. The wave generated by using this block diagram is shown below where the top wave is in time and the bottom is in frequency:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/1da9d35e-d455-40dd-8725-af4029744a2a)

Question 1: What is the relationship between the digital signal and the presence of the carrier in the ASK signal?

The carrier sine wave is being modulated by the square wave only showing when the square wave is high and flatlining when it is low.

Question 2: What is the ASK signal's voltage when the digital signal is logic-0?

The signal's voltage flatlines to 0V when the digital signal is a logic-0.

#### Modified ASK Generation
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/88d7ca95-d251-43a4-8e94-944fb65adfba)

This is the block diagram used for the modified ASK generation which changes the carrier's 2kHz signal with a VCO signal of 100kHz. This causes the frequency of the carrier wave to be much faster which makes the waveform look almost solid as shown below:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/9f7d07ba-cda6-494d-bdf1-ad97367a7963)

Question 3: What feature of the ASK signal suggests that it's an AM signal?

It is an AM signal because the ASK is changing the amplitude of the carrier signal with reference to the digital square wave's logic-1s and logic-0s.

### Part B - Demodulating an ASK signal using an envelope detector
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/60be15ed-050c-402d-99f3-b4eced48be5c)

This block diagram shows the previous block diagram from part A on the left hand side of the dashed line and the new modules on the right hand side. The ASK signal gets passed through a rectifier to get rid of the negative voltages. It is then passed through a low-pass filter that can change it's cuttoff frequency using a knob. The first picture shows when the cutoff frequency knob is fully clockwise capturing the whole signal, the second picture shows the cutoff frequency at a lower frequency cutting off some of the harmonics of the square wave and showing some rippling at the rising and falling edges, and the last picture shows when the cutoff frequency is low enough to cut off most of the harmonics showing a lot of rippling:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/3d633755-7d44-40d9-9ea4-dba0c1980e6c)

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/7aae9779-dac2-4b78-ad67-1e7e5947956e)

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/68718e12-aebf-4370-a2f8-b71017ac58fe)

Question 4: Why is the recovered digital signal not a perfect copy of the original?

This is because the low-pass filter inevitably cuts off some of the harmonics of the square wave as there are an infinite amount and shifts the phase of the signal creating a time delay.

Question 5: What can be used to "clean-up" the recovered digital signal?

By using a Schmitt trigger that can detect when there is a rising and falling edge.

### Part C - Restoring the recovered digital signal using a comparator
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/eecade12-9a47-4991-9ef3-f15e8966b879)

This block diagram just adds a comparator that is comparing the ASK signal to a DC voltage that is set to around the average voltage of the square wave. This makes it so when there is a rising edge the comparator compares the high voltage value with the average to output a high on the square wave and uses the same logic for a falling edge. This is the wave that is generated using this block diagram which gets rid of the phase difference between the original signal and the new signal perfectly restoring it:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/9c807570-2ede-4c15-827c-8f060d7a822f)

Question 6: How does the comparator turn the slow rising voltages of the recovered digital signal into sharp transitions?

This is because of the comparator that compares the voltage changes with the average middle value of the waveform.

### Noise
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/e2aec3d4-9cda-4b04-928f-5e097a905dd1)

This block diagram implements noise into the system using a simple adder with the noise set to -20dBs to start which is a low amount of noise. This is later increased to -6dBs and then the maximum amount of noise 0dBs. The first picture shows the waveform in time similar to part A of the lab, afterwards the waveforms are put through part C with increasing noise output first -20dBs, -6dBs, and finally 0 dBs:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/e4571d05-ba09-4239-8219-c241cec72a99)

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/01067f0f-2511-4f28-b619-16a7ecb49a4d)

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/bd6a076e-4708-4a05-8f49-d6ae5026d82b)

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/3c945f82-5cd9-4572-9663-4a8bc7d0198a)

In the pictures with the orange square wave, due to the increasing amount of noise, there are more and more spikes where the signal voltage should be 0.

## Frequency Shift Keying (FSK)
### Part A - Generating an FSK signal
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/83a8a7f3-f919-402a-8205-86e46c39b7d7)

This is the block diagram used for the first part of this lab. The waveform generated modulates the frequency of the VCO signal using the square wave's logic-1s and logic-0s. When the square wave is at a logic-1 the frequency is higher and when the square wave is at a logic-0 the frequency is lower as shown below:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/7ae86121-dc44-41b2-bfe4-5b1a38795333)

Question 1: What's the name for the VCO output frequency that corresponds with logic-1s in the digital data?

The name of the output frequency that corresponds with the logic-1s is the mark.

Question 2: What's the name for the VCO output frequency that corresponds with logic-0s in the digital data?

The name of the output frequency that corresponds with the logic-0s is the space.

Question 3: Based on your observations of the FSK signal, which of the two is the higher frequency? Explain your answer.

The higher frequency is shown to correspond with when the square wave is at logic-1 which also corresponds to the mark, thus the mark is the higher frequency symbol.

### Part B - Demodulating an FSK signal using filtering and an envelope detector
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/e4893bb5-55ac-40d6-bcf1-9aedb992c799)

This block diagram passes the signal through a low pass filter that has gain control and cut off frequency control. The cut off frequency knob was slowly turned from fully clockwise down until the higher frequency componenet of the FSK signal was close to zero amplitude as shown below:

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/e014b638-5a1c-46e2-bcd0-99d97a3d2f6e)

Question 4: Which of the FSK signal's two sinewaves is the filter picking out?

The filter is picking out the higher frequency wave, as the cut off frequency is lowered the higher frequencies are getting removed thus only leaving the lower frequency wave.

Question 5: What does the filtered FSK signal look like?

It looks like a ASK signal that is inverted with the higher amplitude corresponding to the logic-0 and the lower amplitude corresponding to the logic-1.

#### Rectifier and Bandpass Filter
The low pass filter's gain and cut off frequency are moved back to fully clockwise then the signal is run through a rectifier module and a bandpass filter and the recovered signal is shown below:
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/88fb7c67-2019-4bbe-8e59-ebe722cbd3a1)

Question 6: What can be used to "clean up" the recovered digital signal?

Similar to the ASK the Schmitt trigger can be used to recover the signal cleanly.

### Part C - Restoring the recovered data using a comparator
![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/0059b8af-eb93-4025-b1f0-14942f845b29)
This block diagram just adds the restoration section with the comparator and the DC reference voltage like the ASK. The restored waveform is slightly shifted from the original but otherwise the amplitudes are the same as shown below:

![image](https://github.com/blee0730/Digital-Comm-Lab-4/assets/130094173/352f54bc-c58d-44ad-bd39-3506388e2cbb)

Question 7: How does the comparator turn the slow rising voltages of the recovered digital signal into sharp transitions?

This is again similar to the ASK example where the comparator compares the voltage changes with the average middle value of the waveform.
